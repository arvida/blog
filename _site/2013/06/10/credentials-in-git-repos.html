<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Sensitive data in git repositories</title>
  <meta name="description" content="The other day I got into a discussion about storing AWS credentials in a project’s git repository. The credentials were used for deploying a static site to S...">
  <meta name="google-site-verification" content="hSpvUvfiI4gbjIkE-nZd8otj75nYYr3bjL0kiNH1osg" />

  <link href='http://fonts.googleapis.com/css?family=Shanti' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://blog.arvidandersson.se/2013/06/10/credentials-in-git-repos">
  <link rel="alternate" type="application/rss+xml" title="waiworinao ★ notes by arvid andersson" href="http://blog.arvidandersson.se/feed.xml" />

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">waiworinao ★ notes by arvid andersson</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="http://arvidandersson.se">About</a>
        <a class="page-link" href="https://twitter.com/arvid_a">@arvid_a</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Sensitive data in git repositories</h1>
    <p class="post-meta">Jun 10, 2013</p>
  </header>

  <article class="post-content">
    <p>The other day I got into a discussion about storing AWS credentials in a project’s git repository. The credentials were used for deploying a static site to S3 and the argument was that <em>”it makes it much easier to get started if the credentials already exists in the project when cloned, and as the repo is a private GitHub repository we don’t have to worry about any unauthorised access”</em>.</p>

<p>Years of being forced to handle Ruby On Rails’s database.yml and similar files has made into a habit for me to always keep a projects credentials and sensitive data in separate files that are ignored by git. Approached with the above reasoning made me realise that I might live in a bit of a bubble when it comes to this. Coming from another background you might very well have a another view on how to handle credentials in projects.</p>

<p>I instinctively felt that the above approach was not ideal. Phrasing a sound explanation to why this is a bad idea took some time; the rest of this post is the arguments I came up with.</p>

<h2 id="why-is-this-important">Why is this important?</h2>

<p>We owe it to our customers and our selves to do as much as is reasonably possible to ensure the security of data and credentials. The key way to do this is by minimizing the places where sensitive data exists. Every time you put the sensitive data somewhere you increase the chances of unauthorized access.</p>

<p>Once you have put sensitive data in a git repo it is going to stay in the repository’s history forever (<a href="https://help.github.com/articles/remove-sensitive-data">there are ways around this</a>). You never know where a project folder might end up in the future. Stay safe and make it easy for yourself by handling things like this right from the start of a projects life.</p>

<p><a href="https://github.com/">GitHub</a> is a truly awesome service and I have much respect for it and the people behind it. Still I feel that it is unwise to put any sensitive data in code that is hosted on GitHub and similar services. The reason for this is that websites gets compromised, even <a href="https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation">GitHub has been compromised</a> in the past. It is better to minimize the impact if this happens in the future.</p>

<p>Another reason to keep sensitive data out of private repositories on services is external applications that have access to your repositories via for example <a href="http://developer.github.com/v3/oauth/#scopes">GitHub’s OAuth2 authentication</a>. Some <a href="http://airbrake.io">of</a> <a href="http://tddium.com/">the</a> <a href="http://prose.io/">apps</a> using GitHub’s API request permission to access your private repos. These are great services that have good intentions but once they have access to your private repositories they also introduce another way to get access your sensitive data if it is available in your git repository. Remember, these services can also get hacked.</p>

<p>Finally. Code and configuration (like credentials and sensitive data) is separate parts of a application and varies between different deployments like staging and production. It comes down to good design to keep these separate. The <a href="http://www.12factor.net/">12 Factor app method</a> describes a great policy regarding this in <a href="http://www.12factor.net/config">the Config chapter</a>: <em>”the litmus test is whether an app could be open sourced at any time without compromising any credentials”</em>.</p>

<h2 id="handle-sensitive-data-in-a-project">Handle sensitive data in a project</h2>

<p>The main idea is to keep files with sensitive data separate from files with your application code. The files containing credentials should be added to .gitignore to ensure that they are never accidentally committed. The application code then includes these files as they are needed.</p>

<p>The first time someone clones the project the cloner will need to setup these file with the required credentials. It is a good idea to provide templates for these files in the repository and to include some information on setup and where to find the credentials in the projects readme file. I also suggest using a service like <a href="http://passpack.com/">Passpack</a> or <a href="https://github.com/github/swordfish">Swordfish</a> to handle sharing of credentials and other sensitive data.</p>

<p>Another approach is to store your credentials in environment variables and use something like <a href="https://github.com/bkeepers/dotenv">dotenv</a> to setup these when running locally. On the production server you have these setup automatically for the application when launched. Checkout out how <a href="https://devcenter.heroku.com/articles/config-vars">Heroku uses environment variables</a> for application configuration for inspiration on this approach.</p>

<h2 id="more-resources">More resources</h2>

<p>Figaro is alternative to dotenv mentioned above<br />
<a href="https://github.com/laserlemon/figaro">https://github.com/laserlemon/figaro</a></p>

<p>Econfig is a ruby gem for configuring Rails applications<br />
<a href="https://github.com/elabs/econfig">https://github.com/elabs/econfig</a></p>

<div id="#gh-remove-sensitive-data"></div>
<p>GitHub’s guide to removing accidentally commited sensitive data from a repository<br />
<a href="https://help.github.com/articles/remove-sensitive-data">https://help.github.com/articles/remove-sensitive-data</a></p>

<p>How GitHub was hacked last year<br />
<a href="https://gist.github.com/peternixey/1978249">https://gist.github.com/peternixey/1978249</a></p>

<p><em>Super thanks to <a href="http://lexi.se">Alexis Fellenius</a> for proofreading this blog post.</em></p>

  </article>


  <div id="disqus_thread" style="clear:both;"></div>
  <script type="text/javascript" src="http://disqus.com/forums/blog-arvidandersson/embed.js"></script>
  <noscript>
    <a href="http://disqus.com/forums/blog-arvidandersson/?url=ref">View the discussion thread.</a>
  </noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>waiworinao ★ a blog by <a href="http://arvidandersson.se/">Arvid Andersson</a></p>
      </div>

    </div>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-20637790-3', 'arvidandersson.se');
ga('require', 'displayfeatures');
ga('send', 'pageview');
</script>


  </body>

</html>
